import{_ as U,u as R,r as u,c as o,a as l,b as n,i as y,t as i,f as B,w as d,v as m,n as v,s as C,x as D,y as N,A as I,o as t,B as A}from"./index-BuGE99hL.js";const E={class:"auth-page"},L={class:"container"},M={class:"auth-card"},T={key:0,class:"auth-error"},j={class:"form-group"},z={key:0,class:"input-error-text"},F={class:"form-group"},O={key:0,class:"input-error-text"},$={class:"form-group"},q={key:0,class:"input-error-text"},G={class:"form-group"},H={key:0,class:"input-error-text"},J={class:"form-group"},K={key:0,class:"input-error-text"},Q={class:"form-group"},W={key:0,class:"input-error-text"},X={class:"form-actions"},Y=["disabled"],Z={key:0},ee={key:1},se={class:"auth-links"},le={__name:"RegisterView",setup(ae){const f=R(),k=I(),h=u(""),c=u(""),r=u(""),_=u(""),p=u(""),g=u(""),e=u({}),b=u(!1);function x(){return e.value={},h.value.trim()||(e.value.username="Введите логин"),c.value?/\S+@\S+\.\S+/.test(c.value)||(e.value.email="Введите корректный email"):e.value.email="Введите email",r.value?/^\d+$/.test(r.value)?r.value.length!==11&&(e.value.phone="Номер телефона должен содержать 11 цифр"):e.value.phone="Номер телефона должен содержать только цифры":e.value.phone="Введите номер телефона",_.value.trim()||(e.value.fullname="Введите полное имя"),p.value?p.value.length<6&&(e.value.password="Пароль должен содержать минимум 6 символов"):e.value.password="Введите пароль",p.value!==g.value&&(e.value.confirmPassword="Пароли не совпадают"),Object.keys(e.value).length===0}function V(){r.value=r.value.replace(/\D/g,"").slice(0,11)}async function S(){if(x()){b.value=!0;try{const w={username:h.value,email:c.value,phone:r.value,fullname:_.value,password:p.value};await f.register(w)&&k.push("/")}catch(w){console.error("Ошибка регистрации:",w)}finally{b.value=!1}}}return(w,s)=>{const P=N("RouterLink");return t(),o("div",E,[l("div",L,[l("div",M,[s[13]||(s[13]=l("h1",{class:"auth-title"},"Регистрация",-1)),y(f).error?(t(),o("p",T,i(y(f).error),1)):n("",!0),l("form",{onSubmit:B(S,["prevent"]),class:"auth-form"},[l("div",j,[s[6]||(s[6]=l("label",{for:"username",class:"form-label"},"Логин",-1)),d(l("input",{id:"username",type:"text","onUpdate:modelValue":s[0]||(s[0]=a=>h.value=a),class:v(["form-input",{"input-error":e.value.username}]),placeholder:"Ваш логин"},null,2),[[m,h.value]]),e.value.username?(t(),o("p",z,i(e.value.username),1)):n("",!0)]),l("div",F,[s[7]||(s[7]=l("label",{for:"fullname",class:"form-label"},"Полное имя",-1)),d(l("input",{id:"fullname",type:"text","onUpdate:modelValue":s[1]||(s[1]=a=>_.value=a),class:v(["form-input",{"input-error":e.value.fullname}]),placeholder:"Иванов Иван Иванович"},null,2),[[m,_.value]]),e.value.fullname?(t(),o("p",O,i(e.value.fullname),1)):n("",!0)]),l("div",$,[s[8]||(s[8]=l("label",{for:"email",class:"form-label"},"Email",-1)),d(l("input",{id:"email",type:"email","onUpdate:modelValue":s[2]||(s[2]=a=>c.value=a),class:v(["form-input",{"input-error":e.value.email}]),placeholder:"your@email.com"},null,2),[[m,c.value]]),e.value.email?(t(),o("p",q,i(e.value.email),1)):n("",!0)]),l("div",G,[s[9]||(s[9]=l("label",{for:"phone",class:"form-label"},"Телефон",-1)),d(l("input",{id:"phone",type:"tel","onUpdate:modelValue":s[3]||(s[3]=a=>r.value=a),onInput:V,class:v(["form-input",{"input-error":e.value.phone}]),placeholder:"89991234567",maxlength:"11"},null,34),[[m,r.value]]),e.value.phone?(t(),o("p",H,i(e.value.phone),1)):n("",!0)]),l("div",J,[s[10]||(s[10]=l("label",{for:"password",class:"form-label"},"Пароль",-1)),d(l("input",{id:"password",type:"password","onUpdate:modelValue":s[4]||(s[4]=a=>p.value=a),class:v(["form-input",{"input-error":e.value.password}]),placeholder:"Минимум 6 символов"},null,2),[[m,p.value]]),e.value.password?(t(),o("p",K,i(e.value.password),1)):n("",!0)]),l("div",Q,[s[11]||(s[11]=l("label",{for:"confirmPassword",class:"form-label"},"Подтверждение пароля",-1)),d(l("input",{id:"confirmPassword",type:"password","onUpdate:modelValue":s[5]||(s[5]=a=>g.value=a),class:v(["form-input",{"input-error":e.value.confirmPassword}]),placeholder:"Повторите пароль"},null,2),[[m,g.value]]),e.value.confirmPassword?(t(),o("p",W,i(e.value.confirmPassword),1)):n("",!0)]),l("div",X,[l("button",{type:"submit",class:"btn btn-accent auth-submit-btn",disabled:b.value||y(f).loading},[y(f).loading||b.value?(t(),o("span",Z,"Регистрация...")):(t(),o("span",ee,"Зарегистрироваться"))],8,Y)])],32),l("div",se,[C(P,{to:"/login",class:"auth-link"},{default:D(()=>s[12]||(s[12]=[A("Уже есть аккаунт? Войдите")])),_:1})])])])])}}},te=U(le,[["__scopeId","data-v-49cfe716"]]);export{te as default};

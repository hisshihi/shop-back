import{_ as q,u as G,r as c,g as H,p as N,c as s,i as K,a as t,b as R,t as n,w as B,D as Q,F as x,e as V,v as I,f as Z,E as rt,o as l,n as z,B as M,s as F,x as ut,y as dt,j as ct}from"./index-Bb9AnJlj.js";const vt={class:"products-view"},pt={key:0,class:"access-denied"},mt={key:1},ft={key:0,class:"product-form-container"},_t={class:"form-title"},ht={key:0,class:"error-message"},bt={class:"form-group"},yt=["value"],gt={key:0,class:"loading-indicator"},$t={class:"form-group"},kt={class:"form-group form-group-full"},wt={class:"form-group"},Ct={class:"form-group"},St={class:"form-group form-group-full"},Et={for:"photo_url"},At={class:"image-preview"},Dt=["src"],Ut={class:"form-actions"},Pt=["disabled"],Tt={key:1},xt={class:"filters-container"},zt={class:"filters-row"},Vt={class:"filter-group"},Lt={class:"filter-group"},Rt=["value"],Bt={class:"filter-group"},jt=["value"],Ot={key:0,class:"loading-state"},Ft={key:1,class:"error-message"},It={key:2},Mt={key:0,class:"results-message"},qt={key:1,class:"empty-state"},Gt={key:2,class:"products-table-container"},Nt={class:"products-table"},Jt={class:"product-image-cell"},Qt=["src"],Ht={key:1},Kt={class:"actions-cell"},Wt=["onClick"],Xt=["onClick"],Yt={key:0,class:"pagination"},Zt=["disabled"],te={class:"pagination-info"},ee=["disabled"],se={__name:"ProductsView",setup(J){const h=G(),b=c([]),A=c(0),C=c(!1),y=c(null),f=c(1),D=c(10),i=c(null),$=c(!1),v=c({category_id:"",name:"",description:"",price:"",stock:"",photo_url:null,original_photo_url:null}),P=c(""),E=c(!1),p=c(null),S=c([]),L=c(!1),w=c(""),r=c(""),e=c(""),u=[{value:"name_asc",label:"По названию (А-Я)"},{value:"name_desc",label:"По названию (Я-А)"},{value:"price_asc",label:"По цене (возрастание)"},{value:"price_desc",label:"По цене (убывание)"}];async function a(){if(h.isAdmin){C.value=!0,y.value=null;try{let _="http://localhost:8080/api/v1/product/list";const o=new URLSearchParams;if(o.append("page_id",f.value),o.append("page_size",D.value),w.value.trim()&&o.append("search",w.value.trim()),r.value){const[W,Y]=r.value.split("_");o.append("sort",`${W}_${Y}`)}e.value&&o.append("category_id",e.value);const m=await fetch(`${_}?${o.toString()}`,{method:"GET",headers:{Authorization:`Bearer ${h.token}`}});if(!m.ok)throw new Error("Не удалось загрузить список товаров");const j=await m.json();b.value=j.products||[],A.value=j.products_count||0}catch(_){y.value=_.message,console.error("Ошибка загрузки списка товаров:",_)}finally{C.value=!1}}}async function T(){L.value=!0;try{const _=await fetch("http://localhost:8080/api/v1/category/list",{method:"GET",headers:{Authorization:`Bearer ${h.token}`}});if(!_.ok)throw new Error("Не удалось загрузить список категорий");const o=await _.json();S.value=o.categories||[]}catch(_){console.error("Ошибка загрузки категорий:",_)}finally{L.value=!1}}function U(){f.value=1,a()}function g(){w.value="",r.value="",e.value="",f.value=1,a()}function d(_){f.value=_,a()}function k(_){i.value=_,$.value=!1,v.value={category_id:_.category_id,name:_.name,description:_.description,price:_.price,stock:_.stock,photo_url:null,original_photo_url:_.photo_url},P.value=_.photo_url?`data:image/jpeg;base64,${_.photo_url}`:"https://placehold.co/600x400?text=Нет+фото"}function O(){i.value=null,$.value=!0,v.value={category_id:"",name:"",description:"",price:"",stock:"",photo_url:null,original_photo_url:null},P.value="https://placehold.co/600x400?text=Выберите+фото"}function tt(_){const o=_.target.files[0];if(!o)return;v.value.photo_url=o;const m=new FileReader;m.onload=j=>{P.value=j.target.result},m.readAsDataURL(o)}async function et(){if(lt()){E.value=!0,p.value=null;try{const _=new FormData;if(_.append("category_id",v.value.category_id),_.append("name",v.value.name),_.append("description",v.value.description),_.append("price",v.value.price),_.append("stock",v.value.stock),!$.value&&!v.value.photo_url&&i.value&&i.value.photo_url){const Y=await(await fetch(`data:image/jpeg;base64,${i.value.photo_url}`)).blob(),it=new File([Y],"existing_image.jpg",{type:"image/jpeg"});_.append("photo_url",it)}else if(v.value.photo_url)_.append("photo_url",v.value.photo_url);else if($.value){p.value="Изображение товара обязательно",E.value=!1;return}let o="http://localhost:8080/api/v1/admin/product",m="POST";!$.value&&i.value&&(o=`http://localhost:8080/api/v1/admin/product/${i.value.id}`,m="PUT");const j=await fetch(o,{method:m,headers:{Authorization:`Bearer ${h.token}`},body:_});if(!j.ok){const W=await j.json();throw new Error(W.message||"Ошибка сохранения товара")}await a(),i.value=null,$.value=!1}catch(_){p.value=_.message,console.error("Ошибка сохранения товара:",_)}finally{E.value=!1}}}async function st(_){if(confirm("Вы действительно хотите удалить этот товар?")){C.value=!0,y.value=null;try{if(!(await fetch(`http://localhost:8080/api/v1/admin/product/${_}`,{method:"DELETE",headers:{Authorization:`Bearer ${h.token}`}})).ok)throw new Error("Не удалось удалить товар");await a()}catch(o){y.value=o.message,console.error("Ошибка удаления товара:",o)}finally{C.value=!1}}}function lt(){return p.value=null,!v.value.category_id||parseInt(v.value.category_id)<1?(p.value="Выберите категорию товара",!1):v.value.name.trim()?v.value.description.trim()?!v.value.price.trim()||isNaN(parseFloat(v.value.price))?(p.value="Введите корректную цену товара",!1):!v.value.stock||parseInt(v.value.stock)<1?(p.value="Введите количество товара (минимум 1)",!1):$.value&&!v.value.photo_url?(p.value="Выберите изображение товара",!1):!0:(p.value="Введите описание товара",!1):(p.value="Введите название товара",!1)}function nt(_){return parseFloat(_).toFixed(2)}function at(_){const o=S.value.find(m=>m.id===_);return o?o.name:`Категория ${_}`}const X=H(()=>Math.ceil(A.value/D.value));N(async()=>{h.isAdmin&&(await T(),await a())});const ot=H(()=>`Всего товаров: ${A.value}`);return(_,o)=>(l(),s("div",vt,[K(h).isAdmin?(l(),s("div",mt,[t("div",{class:"actions-bar"},[o[12]||(o[12]=t("h2",{class:"section-title"},"Товары",-1)),t("button",{onClick:O,class:"btn btn-primary"},"Добавить товар")]),$.value||i.value?(l(),s("div",ft,[t("h3",_t,n($.value?"Добавить новый товар":"Редактировать товар"),1),p.value?(l(),s("div",ht,n(p.value),1)):R("",!0),t("form",{onSubmit:Z(et,["prevent"]),class:"product-form"},[t("div",bt,[o[14]||(o[14]=t("label",{for:"category_id"},"Категория*",-1)),B(t("select",{id:"category_id","onUpdate:modelValue":o[0]||(o[0]=m=>v.value.category_id=m),required:"",class:"form-select"},[o[13]||(o[13]=t("option",{value:"",disabled:""},"Выберите категорию",-1)),(l(!0),s(x,null,V(S.value,m=>(l(),s("option",{key:m.id,value:m.id},n(m.name),9,yt))),128))],512),[[Q,v.value.category_id]]),L.value?(l(),s("div",gt,"Загрузка категорий...")):R("",!0)]),t("div",$t,[o[15]||(o[15]=t("label",{for:"name"},"Название*",-1)),B(t("input",{type:"text",id:"name","onUpdate:modelValue":o[1]||(o[1]=m=>v.value.name=m),required:"",class:"form-input"},null,512),[[I,v.value.name]])]),t("div",kt,[o[16]||(o[16]=t("label",{for:"description"},"Описание*",-1)),B(t("textarea",{id:"description","onUpdate:modelValue":o[2]||(o[2]=m=>v.value.description=m),required:"",rows:"4",class:"form-input"},null,512),[[I,v.value.description]])]),t("div",wt,[o[17]||(o[17]=t("label",{for:"price"},"Цена*",-1)),B(t("input",{type:"text",id:"price","onUpdate:modelValue":o[3]||(o[3]=m=>v.value.price=m),required:"",class:"form-input"},null,512),[[I,v.value.price]])]),t("div",Ct,[o[18]||(o[18]=t("label",{for:"stock"},"Количество*",-1)),B(t("input",{type:"number",id:"stock","onUpdate:modelValue":o[4]||(o[4]=m=>v.value.stock=m),required:"",min:"1",class:"form-input"},null,512),[[I,v.value.stock]])]),t("div",St,[t("label",Et,"Изображение"+n($.value?"*":""),1),t("input",{type:"file",id:"photo_url",onChange:tt,accept:"image/*",class:"form-file"},null,32),t("div",At,[t("img",{src:P.value,alt:"Превью изображения"},null,8,Dt)])]),t("div",Ut,[t("button",{type:"button",class:"btn btn-secondary",onClick:o[5]||(o[5]=m=>{$.value=!1,i.value=null})},"Отмена"),t("button",{type:"submit",class:"btn btn-primary",disabled:E.value},n(E.value?"Сохранение...":"Сохранить"),9,Pt)])],32)])):(l(),s("div",Tt,[t("div",xt,[t("div",zt,[t("div",Vt,[B(t("input",{type:"text","onUpdate:modelValue":o[6]||(o[6]=m=>w.value=m),placeholder:"Поиск по названию...",class:"search-input",onKeyup:rt(U,["enter"])},null,544),[[I,w.value]]),t("button",{onClick:U,class:"btn btn-sm btn-primary"},"Найти")]),t("div",Lt,[B(t("select",{"onUpdate:modelValue":o[7]||(o[7]=m=>e.value=m),class:"filter-select",onChange:U},[o[19]||(o[19]=t("option",{value:""},"Все категории",-1)),(l(!0),s(x,null,V(S.value,m=>(l(),s("option",{key:m.id,value:m.id},n(m.name),9,Rt))),128))],544),[[Q,e.value]])]),t("div",Bt,[B(t("select",{"onUpdate:modelValue":o[8]||(o[8]=m=>r.value=m),class:"filter-select",onChange:U},[o[20]||(o[20]=t("option",{value:""},"Сортировка",-1)),(l(),s(x,null,V(u,m=>t("option",{key:m.value,value:m.value},n(m.label),9,jt)),64))],544),[[Q,r.value]])]),t("div",{class:"filter-actions"},[t("button",{onClick:g,class:"btn btn-sm btn-secondary"},"Сбросить")])])]),C.value?(l(),s("div",Ot,o[21]||(o[21]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"Загрузка товаров...",-1)]))):y.value?(l(),s("div",Ft,[t("p",null,n(y.value),1),t("button",{onClick:a,class:"btn btn-primary"},"Повторить")])):(l(),s("div",It,[b.value.length>0||w.value||e.value||r.value?(l(),s("div",Mt,n(ot.value),1)):R("",!0),b.value.length===0?(l(),s("div",qt,[o[22]||(o[22]=t("p",null,"Товары не найдены",-1)),t("button",{onClick:O,class:"btn btn-primary"},"Добавить товар")])):(l(),s("div",Gt,[t("table",Nt,[o[23]||(o[23]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Изображение"),t("th",null,"Название"),t("th",null,"Категория"),t("th",null,"Цена"),t("th",null,"Количество"),t("th",null,"Действия")])],-1)),t("tbody",null,[(l(!0),s(x,null,V(b.value,m=>(l(),s("tr",{key:m.id},[t("td",null,n(m.id),1),t("td",Jt,[m.photo_url?(l(),s("img",{key:0,src:`data:image/jpeg;base64,${m.photo_url}`,alt:"Изображение товара",class:"product-thumbnail"},null,8,Qt)):(l(),s("span",Ht,"Нет фото"))]),t("td",null,n(m.name),1),t("td",null,n(at(m.category_id)),1),t("td",null,n(nt(m.price))+" ₽",1),t("td",null,n(m.stock),1),t("td",Kt,[t("button",{onClick:j=>k(m),class:"btn btn-sm btn-secondary"},"Редактировать",8,Wt),t("button",{onClick:j=>st(m.id),class:"btn btn-sm btn-danger"},"Удалить",8,Xt)])]))),128))])]),X.value>1?(l(),s("div",Yt,[t("button",{class:"pagination-btn",disabled:f.value===1,onClick:o[9]||(o[9]=m=>d(f.value-1))}," « Назад ",8,Zt),t("span",te," Страница "+n(f.value)+" из "+n(X.value),1),t("button",{class:"pagination-btn",disabled:f.value===X.value,onClick:o[10]||(o[10]=m=>d(f.value+1))}," Вперед » ",8,ee)])):R("",!0)]))]))]))])):(l(),s("div",pt,o[11]||(o[11]=[t("h2",null,"Доступ запрещен",-1),t("p",null,"У вас нет прав администратора для доступа к этой странице.",-1)])))]))}},le=q(se,[["__scopeId","data-v-a97f3a79"]]),ne={class:"category-view"},ae={key:0,class:"access-denied"},oe={key:1},ie={key:0,class:"category-form-container"},re={class:"form-title"},ue={key:0,class:"error-message"},de={class:"form-group"},ce={class:"form-actions"},ve=["disabled"],pe={key:1},me={key:0,class:"loading-state"},fe={key:1,class:"error-message"},_e={key:2,class:"empty-state"},he={key:3,class:"categories-table-container"},be={class:"categories-table"},ye={class:"actions-cell"},ge=["onClick"],$e=["onClick"],ke={__name:"CategoryView",setup(J){const h=G(),b=c([]),A=c(!1),C=c(null),y=c(null),f=c(!1),D=c({name:""}),i=c(!1),$=c(null);async function v(){if(h.isAdmin){A.value=!0,C.value=null;try{const w=await fetch("http://localhost:8080/api/v1/category/list",{method:"GET",headers:{Authorization:`Bearer ${h.token}`}});if(!w.ok)throw new Error("Не удалось загрузить список категорий");const r=await w.json();b.value=r.categories||[]}catch(w){C.value=w.message,console.error("Ошибка загрузки категорий:",w)}finally{A.value=!1}}}function P(){y.value=null,f.value=!0,D.value={name:""}}function E(w){y.value=w,f.value=!1,D.value={name:w.name}}function p(){return $.value=null,D.value.name.trim()?!0:($.value="Введите название категории",!1)}async function S(){if(p()){i.value=!0,$.value=null;try{let w="http://localhost:8080/api/v1/admin/category",r="POST";!f.value&&y.value&&(w=`http://localhost:8080/api/v1/admin/category/${y.value.id}`,r="PUT");const e=await fetch(w,{method:r,headers:{Authorization:`Bearer ${h.token}`,"Content-Type":"application/json"},body:JSON.stringify({name:D.value.name})});if(!e.ok){const u=await e.json();throw new Error(u.message||"Ошибка сохранения категории")}await v(),y.value=null,f.value=!1}catch(w){$.value=w.message,console.error("Ошибка сохранения категории:",w)}finally{i.value=!1}}}async function L(w){if(confirm("Внимание! Удаление категории приведет к удалению всех связанных с ней товаров. Вы действительно хотите продолжить?")){A.value=!0,C.value=null;try{if(!(await fetch(`http://localhost:8080/api/v1/admin/category/${w}`,{method:"DELETE",headers:{Authorization:`Bearer ${h.token}`}})).ok)throw new Error("Не удалось удалить категорию");await v()}catch(r){C.value=r.message,console.error("Ошибка удаления категории:",r)}finally{A.value=!1}}}return N(async()=>{h.isAdmin&&await v()}),(w,r)=>(l(),s("div",ne,[K(h).isAdmin?(l(),s("div",oe,[t("div",{class:"actions-bar"},[r[3]||(r[3]=t("h2",{class:"section-title"},"Категории",-1)),t("button",{onClick:P,class:"btn btn-primary"},"Добавить категорию")]),f.value||y.value?(l(),s("div",ie,[t("h3",re,n(f.value?"Добавить новую категорию":"Редактировать категорию"),1),$.value?(l(),s("div",ue,n($.value),1)):R("",!0),t("form",{onSubmit:Z(S,["prevent"]),class:"category-form"},[t("div",de,[r[4]||(r[4]=t("label",{for:"name"},"Название категории*",-1)),B(t("input",{type:"text",id:"name","onUpdate:modelValue":r[0]||(r[0]=e=>D.value.name=e),required:"",class:"form-input"},null,512),[[I,D.value.name]])]),t("div",ce,[t("button",{type:"button",class:"btn btn-secondary",onClick:r[1]||(r[1]=e=>{f.value=!1,y.value=null})},"Отмена"),t("button",{type:"submit",class:"btn btn-primary",disabled:i.value},n(i.value?"Сохранение...":"Сохранить"),9,ve)])],32)])):(l(),s("div",pe,[A.value?(l(),s("div",me,r[5]||(r[5]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"Загрузка категорий...",-1)]))):C.value?(l(),s("div",fe,[t("p",null,n(C.value),1),t("button",{onClick:v,class:"btn btn-primary"},"Повторить")])):b.value.length===0?(l(),s("div",_e,[r[6]||(r[6]=t("p",null,"Категории не найдены",-1)),t("button",{onClick:P,class:"btn btn-primary"},"Добавить категорию")])):(l(),s("div",he,[t("table",be,[r[7]||(r[7]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Название"),t("th",null,"Действия")])],-1)),t("tbody",null,[(l(!0),s(x,null,V(b.value,e=>(l(),s("tr",{key:e.id},[t("td",null,n(e.id),1),t("td",null,n(e.name),1),t("td",ye,[t("button",{onClick:u=>E(e),class:"btn btn-sm btn-secondary"},"Редактировать",8,ge),t("button",{onClick:u=>L(e.id),class:"btn btn-sm btn-danger"},"Удалить",8,$e)])]))),128))])])]))]))])):(l(),s("div",ae,r[2]||(r[2]=[t("h2",null,"Доступ запрещен",-1),t("p",null,"У вас нет прав администратора для доступа к этой странице.",-1)])))]))}},we=q(ke,[["__scopeId","data-v-947bc68e"]]),Ce={class:"orders-view"},Se={key:0,class:"access-denied"},Ee={key:1},Ae={class:"actions-bar"},De={class:"pagination-info"},Ue={key:0,class:"loading-state"},Pe={key:1,class:"error-message"},Te={key:2,class:"empty-state"},xe={key:3},ze={class:"orders-table-container"},Ve={class:"orders-table"},Le={class:"actions-cell"},Re=["onClick"],Be=["onClick"],je=["onClick"],Oe={key:0,class:"pagination-container"},Fe={class:"pagination"},Ie=["disabled"],Me=["onClick"],qe=["disabled"],Ge={key:4,class:"modal"},Ne={class:"modal-content"},Je={class:"modal-header"},Qe={class:"modal-body"},He={class:"order-info"},Ke={class:"info-row"},We={class:"info-row"},Xe={class:"info-row"},Ye={class:"info-row"},Ze={class:"info-row"},ts={class:"info-row"},es={class:"info-row"},ss={key:0,class:"order-items"},ls={class:"items-table"},ns={key:1,class:"no-items"},as={key:5,class:"modal"},os={class:"modal-content"},is={class:"modal-header"},rs={class:"modal-body"},us={class:"edit-order-form"},ds={class:"form-group"},cs=["value"],vs={__name:"OrdersView",setup(J){const h=G(),b=c([]),A=c(0),C=c(!1),y=c(null),f=c(1),D=c(10),i=c(null),$=c(!1),v=c(!1),P=[{value:"processed",label:"Обработан"},{value:"delivering",label:"Доставляется"},{value:"delivered",label:"Доставлен"},{value:"canceled",label:"Отменен"}];function E(g){return new Date(g).toLocaleString("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}const p=H(()=>Math.ceil(A.value/D.value)||1);async function S(){if(h.isAdmin){C.value=!0,y.value=null;try{const g=await fetch(`http://localhost:8080/api/v1/admin/order/list?page_id=${f.value}&page_size=${D.value}`,{method:"GET",headers:{Authorization:`Bearer ${h.token}`}});if(!g.ok)throw new Error("Не удалось загрузить список заказов");const d=await g.json();b.value=d.orders||[],A.value=d.count_orders||0}catch(g){y.value=g.message,console.error("Ошибка загрузки заказов:",g)}finally{C.value=!1}}}function L(g){g>=1&&g<=p.value&&g!==f.value&&(f.value=g,S())}function w(g){i.value={...g},$.value=!0,v.value=!1}function r(g){i.value={...g},$.value=!1,v.value=!0}function e(){i.value=null,$.value=!1,v.value=!1}async function u(){if(i.value){C.value=!0,y.value=null;try{if(!(await fetch(`http://localhost:8080/api/v1/admin/order/${i.value.id}`,{method:"PUT",headers:{Authorization:`Bearer ${h.token}`,"Content-Type":"application/json"},body:JSON.stringify({status:i.value.status})})).ok)throw new Error("Не удалось обновить статус заказа");await S(),e()}catch(g){y.value=g.message,console.error("Ошибка обновления заказа:",g)}finally{C.value=!1}}}async function a(g){if(confirm("Вы действительно хотите удалить этот заказ? Это действие нельзя отменить.")){C.value=!0,y.value=null;try{if(!(await fetch(`http://localhost:8080/api/v1/admin/order/${g}`,{method:"DELETE",headers:{Authorization:`Bearer ${h.token}`}})).ok)throw new Error("Не удалось удалить заказ");await S()}catch(d){y.value=d.message,console.error("Ошибка удаления заказа:",d)}finally{C.value=!1}}}function T(g){switch(g){case"processed":return"status-processed";case"delivering":return"status-delivering";case"delivered":return"status-delivered";case"canceled":return"status-canceled";default:return""}}function U(g){const d=P.find(k=>k.value===g);return d?d.label:g}return N(async()=>{h.isAdmin&&await S()}),(g,d)=>(l(),s("div",Ce,[K(h).isAdmin?(l(),s("div",Ee,[t("div",Ae,[d[4]||(d[4]=t("h2",{class:"section-title"},"Управление заказами",-1)),t("div",De,[t("span",null,"Всего заказов: "+n(A.value),1)])]),C.value?(l(),s("div",Ue,d[5]||(d[5]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"Загрузка заказов...",-1)]))):y.value?(l(),s("div",Pe,[t("p",null,n(y.value),1),t("button",{onClick:S,class:"btn btn-primary"},"Повторить")])):b.value.length===0?(l(),s("div",Te,d[6]||(d[6]=[t("p",null,"Заказы не найдены",-1)]))):(l(),s("div",xe,[t("div",ze,[t("table",Ve,[d[7]||(d[7]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Пользователь"),t("th",null,"Сумма"),t("th",null,"Статус"),t("th",null,"Способ оплаты"),t("th",null,"Дата создания"),t("th",null,"Действия")])],-1)),t("tbody",null,[(l(!0),s(x,null,V(b.value,k=>(l(),s("tr",{key:k.id},[t("td",null,n(k.id),1),t("td",null,"ID "+n(k.user_id),1),t("td",null,n(parseFloat(k.total_amount).toLocaleString("ru-RU"))+" ₽",1),t("td",null,[t("span",{class:z(["status-badge",T(k.status)])},n(U(k.status)),3)]),t("td",null,n(k.payment_method==="card"?"Карта":k.payment_method),1),t("td",null,n(E(k.created_at)),1),t("td",Le,[t("button",{onClick:O=>w(k),class:"btn btn-sm btn-primary"},"Просмотр",8,Re),t("button",{onClick:O=>r(k),class:"btn btn-sm btn-secondary"},"Изменить статус",8,Be),t("button",{onClick:O=>a(k.id),class:"btn btn-sm btn-danger"},"Удалить",8,je)])]))),128))])])]),p.value>1?(l(),s("div",Oe,[t("div",Fe,[t("button",{onClick:d[0]||(d[0]=k=>L(f.value-1)),disabled:f.value===1,class:"pagination-btn"}," « ",8,Ie),(l(!0),s(x,null,V(p.value,k=>(l(),s("button",{key:k,onClick:O=>L(k),class:z(["pagination-btn",{active:k===f.value}])},n(k),11,Me))),128)),t("button",{onClick:d[1]||(d[1]=k=>L(f.value+1)),disabled:f.value===p.value,class:"pagination-btn"}," » ",8,qe)])])):R("",!0)])),$.value&&i.value?(l(),s("div",Ge,[t("div",Ne,[t("div",Je,[t("h3",null,"Детали заказа #"+n(i.value.id),1),t("button",{onClick:e,class:"close-btn"},"×")]),t("div",Qe,[t("div",He,[t("div",Ke,[d[8]||(d[8]=t("span",{class:"info-label"},"Статус:",-1)),t("span",{class:z(["status-badge",T(i.value.status)])},n(U(i.value.status)),3)]),t("div",We,[d[9]||(d[9]=t("span",{class:"info-label"},"ID пользователя:",-1)),t("span",null,n(i.value.user_id),1)]),t("div",Xe,[d[10]||(d[10]=t("span",{class:"info-label"},"Сумма заказа:",-1)),t("span",null,n(parseFloat(i.value.total_amount).toLocaleString("ru-RU"))+" ₽",1)]),t("div",Ye,[d[11]||(d[11]=t("span",{class:"info-label"},"Способ оплаты:",-1)),t("span",null,n(i.value.payment_method==="card"?"Карта":i.value.payment_method),1)]),t("div",Ze,[d[12]||(d[12]=t("span",{class:"info-label"},"Адрес доставки:",-1)),t("span",null,n(i.value.delivery_address),1)]),t("div",ts,[d[13]||(d[13]=t("span",{class:"info-label"},"Дата создания:",-1)),t("span",null,n(E(i.value.created_at)),1)]),t("div",es,[d[14]||(d[14]=t("span",{class:"info-label"},"Последнее обновление:",-1)),t("span",null,n(E(i.value.updated_at)),1)])]),d[17]||(d[17]=t("h4",{class:"items-title"},"Товары в заказе",-1)),i.value.items&&i.value.items.RawMessage&&i.value.items.RawMessage.length>0?(l(),s("div",ss,[t("table",ls,[d[15]||(d[15]=t("thead",null,[t("tr",null,[t("th",null,"ID товара"),t("th",null,"Количество"),t("th",null,"Цена"),t("th",null,"Сумма")])],-1)),t("tbody",null,[(l(!0),s(x,null,V(i.value.items.RawMessage,k=>(l(),s("tr",{key:k.id},[t("td",null,n(k.product_id),1),t("td",null,n(k.quantity),1),t("td",null,n(k.price.toLocaleString("ru-RU"))+" ₽",1),t("td",null,n((k.price*k.quantity).toLocaleString("ru-RU"))+" ₽",1)]))),128))])])])):(l(),s("div",ns,d[16]||(d[16]=[t("p",null,"Нет товаров в заказе",-1)])))])])])):R("",!0),v.value&&i.value?(l(),s("div",as,[t("div",os,[t("div",is,[t("h3",null,"Изменение статуса заказа #"+n(i.value.id),1),t("button",{onClick:e,class:"close-btn"},"×")]),t("div",rs,[t("div",us,[t("div",ds,[d[18]||(d[18]=t("label",{for:"orderStatus"},"Статус заказа",-1)),B(t("select",{id:"orderStatus","onUpdate:modelValue":d[2]||(d[2]=k=>i.value.status=k),class:"form-input"},[(l(),s(x,null,V(P,k=>t("option",{key:k.value,value:k.value},n(k.label),9,cs)),64))],512),[[Q,i.value.status]])]),t("div",{class:"form-actions"},[t("button",{onClick:e,class:"btn btn-secondary"},"Отмена"),t("button",{onClick:u,class:"btn btn-primary"},"Сохранить")])])])])])):R("",!0),$.value||v.value?(l(),s("div",{key:6,class:"modal-backdrop",onClick:e})):R("",!0)])):(l(),s("div",Se,d[3]||(d[3]=[t("h2",null,"Доступ запрещен",-1),t("p",null,"У вас нет прав администратора для доступа к этой странице.",-1)])))]))}},ps=q(vs,[["__scopeId","data-v-b7dac41c"]]),ms={class:"users-view"},fs={key:0,class:"access-denied"},_s={key:1},hs={class:"actions-bar"},bs={class:"pagination-info"},ys={key:0,class:"error-message"},gs={key:1,class:"loading-state"},$s={key:2,class:"empty-state"},ks={key:3},ws={class:"users-table-container"},Cs={class:"users-table"},Ss={class:"actions-cell"},Es=["onClick"],As=["onClick","disabled"],Ds={key:0},Us={key:1},Ps={key:0,class:"pagination-container"},Ts={class:"pagination"},xs=["disabled"],zs=["onClick"],Vs=["disabled"],Ls={key:4,class:"modal"},Rs={class:"modal-content"},Bs={class:"modal-body"},js={class:"user-info"},Os={class:"info-row"},Fs={class:"info-row"},Is={class:"info-row"},Ms={class:"info-row"},qs={class:"info-row"},Gs={class:"info-row"},Ns={class:"info-row"},Js={class:"info-row"},Qs={class:"info-row"},Hs={class:"info-row"},Ks={class:"modal-actions"},Ws={__name:"UsersView",setup(J){const h=G(),b=c([]),A=c(0),C=c(!1),y=c(null),f=c(1),D=c(10),i=c(null),$=c(!1),v=c(null);async function P(){if(h.isAdmin){C.value=!0,y.value=null;try{const e=await fetch(`http://localhost:8080/api/v1/admin/users/list?page_id=${f.value}&page_size=${D.value}`,{method:"GET",headers:{Authorization:`Bearer ${h.token}`}});if(!e.ok)throw new Error("Не удалось загрузить список пользователей");const u=await e.json();b.value=u.users||[],A.value=u.users_count||0}catch(e){y.value=e.message,console.error("Ошибка загрузки пользователей:",e)}finally{C.value=!1}}}async function E(e,u){const a=!u;if(confirm(a?"Вы действительно хотите заблокировать этого пользователя?":"Вы действительно хотите разблокировать этого пользователя?")){v.value=e,y.value=null;try{if(!(await fetch(`http://localhost:8080/api/v1/admin/users/banned/${e}`,{method:"PATCH",headers:{Authorization:`Bearer ${h.token}`,"Content-Type":"application/json"},body:JSON.stringify({is_banned:a})})).ok)throw new Error("Не удалось изменить статус блокировки пользователя");const g=b.value.findIndex(d=>d.id===e);g!==-1&&(b.value[g].is_banned=a)}catch(U){y.value=U.message,console.error("Ошибка изменения статуса блокировки:",U)}finally{v.value=null}}}const p=H(()=>Math.ceil(A.value/D.value)||1);function S(e){e>=1&&e<=p.value&&e!==f.value&&(f.value=e,P())}function L(e){i.value={...e},$.value=!0}function w(){i.value=null,$.value=!1}function r(e){return new Date(e).toLocaleString("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}return N(async()=>{h.isAdmin&&await P()}),(e,u)=>(l(),s("div",ms,[K(h).isAdmin?(l(),s("div",_s,[t("div",hs,[u[4]||(u[4]=t("h2",{class:"section-title"},"Управление пользователями",-1)),t("div",bs,[t("span",null,"Всего пользователей: "+n(A.value),1)])]),y.value?(l(),s("div",ys,[t("p",null,n(y.value),1),t("button",{onClick:P,class:"btn btn-primary"},"Повторить")])):R("",!0),C.value?(l(),s("div",gs,u[5]||(u[5]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"Загрузка пользователей...",-1)]))):b.value.length===0?(l(),s("div",$s,u[6]||(u[6]=[t("p",null,"Пользователи не найдены",-1)]))):(l(),s("div",ks,[t("div",ws,[t("table",Cs,[u[7]||(u[7]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Имя пользователя"),t("th",null,"Email"),t("th",null,"ФИО"),t("th",null,"Телефон"),t("th",null,"Роль"),t("th",null,"Статус"),t("th",null,"Действия")])],-1)),t("tbody",null,[(l(!0),s(x,null,V(b.value,a=>(l(),s("tr",{key:a.id,class:z({"banned-user":a.is_banned})},[t("td",null,n(a.id),1),t("td",null,n(a.username),1),t("td",null,n(a.email),1),t("td",null,n(a.fullname),1),t("td",null,n(a.phone),1),t("td",null,n(a.role==="admin"?"Администратор":"Пользователь"),1),t("td",null,[t("span",{class:z(["status-badge",a.is_banned?"status-banned":"status-active"])},n(a.is_banned?"Заблокирован":"Активен"),3)]),t("td",Ss,[t("button",{onClick:T=>L(a),class:"btn btn-sm btn-primary"}," Детали ",8,Es),t("button",{onClick:T=>E(a.id,a.is_banned),class:z(["btn btn-sm",[a.is_banned?"btn-success":"btn-danger"]]),disabled:v.value===a.id},[v.value===a.id?(l(),s("span",Ds," Обработка... ")):(l(),s("span",Us,n(a.is_banned?"Разблокировать":"Заблокировать"),1))],10,As)])],2))),128))])])]),p.value>1?(l(),s("div",Ps,[t("div",Ts,[t("button",{onClick:u[0]||(u[0]=a=>S(f.value-1)),disabled:f.value===1,class:"pagination-btn"}," « ",8,xs),(l(!0),s(x,null,V(p.value,a=>(l(),s("button",{key:a,onClick:T=>S(a),class:z(["pagination-btn",{active:a===f.value}])},n(a),11,zs))),128)),t("button",{onClick:u[1]||(u[1]=a=>S(f.value+1)),disabled:f.value===p.value,class:"pagination-btn"}," » ",8,Vs)])])):R("",!0)])),$.value&&i.value?(l(),s("div",Ls,[t("div",Rs,[t("div",{class:"modal-header"},[u[8]||(u[8]=t("h3",null,"Информация о пользователе",-1)),t("button",{onClick:w,class:"close-btn"},"×")]),t("div",Bs,[t("div",js,[t("div",Os,[u[9]||(u[9]=t("span",{class:"info-label"},"ID:",-1)),t("span",null,n(i.value.id),1)]),t("div",Fs,[u[10]||(u[10]=t("span",{class:"info-label"},"Имя пользователя:",-1)),t("span",null,n(i.value.username),1)]),t("div",Is,[u[11]||(u[11]=t("span",{class:"info-label"},"Email:",-1)),t("span",null,n(i.value.email),1)]),t("div",Ms,[u[12]||(u[12]=t("span",{class:"info-label"},"ФИО:",-1)),t("span",null,n(i.value.fullname),1)]),t("div",qs,[u[13]||(u[13]=t("span",{class:"info-label"},"Телефон:",-1)),t("span",null,n(i.value.phone),1)]),t("div",Gs,[u[14]||(u[14]=t("span",{class:"info-label"},"Роль:",-1)),t("span",null,n(i.value.role==="admin"?"Администратор":"Пользователь"),1)]),t("div",Ns,[u[15]||(u[15]=t("span",{class:"info-label"},"Статус:",-1)),t("span",{class:z(["status-badge",i.value.is_banned?"status-banned":"status-active"])},n(i.value.is_banned?"Заблокирован":"Активен"),3)]),t("div",Js,[u[16]||(u[16]=t("span",{class:"info-label"},"Бонусные баллы:",-1)),t("span",null,n(i.value.bonus_points),1)]),t("div",Qs,[u[17]||(u[17]=t("span",{class:"info-label"},"Дата регистрации:",-1)),t("span",null,n(r(i.value.created_at)),1)]),t("div",Hs,[u[18]||(u[18]=t("span",{class:"info-label"},"Последнее обновление:",-1)),t("span",null,n(r(i.value.updated_at)),1)])]),t("div",Ks,[t("button",{onClick:u[2]||(u[2]=a=>{E(i.value.id,i.value.is_banned),w()}),class:z(["btn",[i.value.is_banned?"btn-success":"btn-danger"]])},n(i.value.is_banned?"Разблокировать":"Заблокировать"),3),t("button",{onClick:w,class:"btn btn-secondary"},"Закрыть")])])])])):R("",!0),$.value?(l(),s("div",{key:5,class:"modal-backdrop",onClick:w})):R("",!0)])):(l(),s("div",fs,u[3]||(u[3]=[t("h2",null,"Доступ запрещен",-1),t("p",null,"У вас нет прав администратора для доступа к этой странице.",-1)])))]))}},Xs=q(Ws,[["__scopeId","data-v-0795ede9"]]),Ys={class:"logs-view"},Zs={key:0,class:"admin-loading"},tl={key:1,class:"admin-error"},el={key:2},sl={class:"logs-header"},ll={class:"logs-count"},nl={class:"logs-filter"},al={key:0,class:"no-logs"},ol={key:1,class:"logs-table-container"},il={class:"logs-table"},rl={class:"pagination"},ul=["disabled"],dl={class:"pagination-info"},cl=["disabled"],vl={__name:"LogsView",setup(J){const h=G(),b=c([]),A=c(0),C=c(!1),y=c(null),f=c(1),D=c(10);function i(E){return new Date(E).toLocaleString("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}const $=H(()=>Math.ceil(A.value/D.value)||1);async function v(){if(h.isAdmin){C.value=!0,y.value=null;try{const E=await fetch(`http://localhost:8080/api/v1/admin/logs?page_id=${f.value}&page_size=${D.value}`,{method:"GET",headers:{Authorization:`Bearer ${h.token}`}});if(!E.ok)throw new Error("Не удалось загрузить список логов");const p=await E.json();b.value=p.logs||[],A.value=p.count_logs||0}catch(E){y.value=E.message,console.error("Ошибка загрузки логов:",E)}finally{C.value=!1}}}function P(E){E>=1&&E<=$.value&&E!==f.value&&(f.value=E,v())}return N(async()=>{h.isAdmin&&await v()}),(E,p)=>(l(),s("div",Ys,[p[10]||(p[10]=t("h2",{class:"admin-tab-title"},"Логи системы",-1)),C.value?(l(),s("div",Zs,p[4]||(p[4]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"Загрузка логов...",-1)]))):y.value?(l(),s("div",tl,[t("p",null,n(y.value),1),t("button",{onClick:v,class:"btn btn-outline"},"Повторить")])):(l(),s("div",el,[t("div",sl,[t("div",ll,[p[5]||(p[5]=M(" Всего записей: ")),t("strong",null,n(A.value),1)]),t("div",nl,[p[7]||(p[7]=t("label",{for:"pageSize"},"Показывать по:",-1)),B(t("select",{id:"pageSize","onUpdate:modelValue":p[0]||(p[0]=S=>D.value=S),onChange:p[1]||(p[1]=S=>{f.value=1,v()})},p[6]||(p[6]=[t("option",{value:"5"},"5",-1),t("option",{value:"10"},"10",-1),t("option",{value:"20"},"20",-1),t("option",{value:"50"},"50",-1)]),544),[[Q,D.value]])])]),b.value.length===0?(l(),s("div",al,p[8]||(p[8]=[t("p",null,"Логи отсутствуют",-1)]))):(l(),s("div",ol,[t("table",il,[p[9]||(p[9]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Пользователь"),t("th",null,"Действие"),t("th",null,"Дата")])],-1)),t("tbody",null,[(l(!0),s(x,null,V(b.value,S=>(l(),s("tr",{key:S.id},[t("td",null,n(S.id),1),t("td",null,n(S.user_id&&S.user_id.Valid?`ID: ${S.user_id.Int64}`:"Система"),1),t("td",null,n(S.action),1),t("td",null,n(i(S.created_at)),1)]))),128))])])])),t("div",rl,[t("button",{class:"pagination-btn",disabled:f.value===1,onClick:p[2]||(p[2]=S=>P(f.value-1))}," « Предыдущая ",8,ul),t("div",dl," Страница "+n(f.value)+" из "+n($.value),1),t("button",{class:"pagination-btn",disabled:f.value===$.value,onClick:p[3]||(p[3]=S=>P(f.value+1))}," Следующая » ",8,cl)])]))]))}},pl=q(vl,[["__scopeId","data-v-d1e679fd"]]),ml={class:"admin-view"},fl={class:"container"},_l={key:0,class:"access-denied"},hl={key:1,class:"admin-panel"},bl={class:"admin-sidebar"},yl={class:"admin-nav"},gl={class:"admin-content"},$l={key:0,class:"admin-tab"},kl={key:0,class:"admin-loading"},wl={key:1,class:"admin-error"},Cl={key:2},Sl={class:"stats-grid"},El={class:"stat-card"},Al={class:"stat-value"},Dl={class:"stat-card"},Ul={class:"stat-value"},Pl={class:"stat-card"},Tl={class:"stat-value"},xl={class:"stat-card"},zl={class:"stat-value"},Vl={class:"stats-section"},Ll={class:"order-stats-chart"},Rl={class:"chart-tooltip"},Bl={class:"chart-label"},jl={class:"order-stats-table-container"},Ol={class:"order-stats-table"},Fl={class:"stats-section"},Il={class:"top-products-table-container"},Ml={class:"top-products-table"},ql={class:"stats-section"},Gl={class:"backup-buttons"},Nl={key:1,class:"admin-tab"},Jl={key:2,class:"admin-tab"},Ql={key:3,class:"admin-tab"},Hl={key:4,class:"admin-tab"},Kl={key:5,class:"admin-tab"},Wl={key:6,class:"admin-tab"},Xl={class:"admin-tab-title"},Yl={__name:"AdminView",setup(J){const h=G(),b=c("dashboard"),A=c(!1),C=c(null),y=c({totalOrders:0,totalProducts:0,totalUsers:0,totalRevenue:0}),f=c([]),D=c([]),i=c([]);function $(r){return new Date(r).toLocaleDateString("ru-RU",{day:"numeric",month:"long"})}function v(r){return parseFloat(r).toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2})+" ₽"}async function P(){A.value=!0,C.value=null;try{await Promise.all([E(),p(),S()])}catch(r){C.value="Не удалось загрузить данные",console.error(r)}finally{A.value=!1}}async function E(){try{const[r,e,u,a]=await Promise.all([fetch("http://localhost:8080/api/v1/admin/count-order",{method:"GET",headers:{Authorization:`Bearer ${h.token}`}}),fetch("http://localhost:8080/api/v1/admin/product-count",{method:"GET",headers:{Authorization:`Bearer ${h.token}`}}),fetch("http://localhost:8080/api/v1/admin/users-count",{method:"GET",headers:{Authorization:`Bearer ${h.token}`}}),fetch("http://localhost:8080/api/v1/admin/order-sum",{method:"GET",headers:{Authorization:`Bearer ${h.token}`}})]);if(!r.ok||!e.ok||!u.ok||!a.ok)throw new Error("Ошибка загрузки статистических данных");const[T,U,g,d]=await Promise.all([r.json(),e.json(),u.json(),a.json()]);y.value={totalOrders:T||0,totalProducts:U||0,totalUsers:g||0,totalRevenue:parseFloat(d||0)}}catch(r){throw console.error("Ошибка загрузки статистики:",r),r}}async function p(){try{const r=await fetch("http://localhost:8080/api/v1/admin/order-stats",{method:"GET",headers:{Authorization:`Bearer ${h.token}`}});if(!r.ok)throw new Error("Не удалось загрузить статистику заказов");f.value=await r.json(),f.value.reverse()}catch(r){throw console.error("Ошибка загрузки статистики заказов:",r),r}}async function S(){try{const r=await fetch("http://localhost:8080/api/v1/admin/top-product",{method:"GET",headers:{Authorization:`Bearer ${h.token}`}});if(!r.ok)throw new Error("Не удалось загрузить топ продаж");D.value=await r.json()}catch(r){throw console.error("Ошибка загрузки топа продаж:",r),r}}function L(r){if(!h.isAdmin)return;const e=r==="sql"?"admin/backup/sql":"admin/backup/csv",u=r==="sql"?".sql":".rar",a=`http://localhost:8080/api/v1/${e}`,T=Date.now();i.value.push({id:T,type:"info",text:`Создание резервной копии в формате ${r.toUpperCase()}...`}),fetch(a,{method:"GET",headers:{Authorization:`Bearer ${h.token}`}}).then(U=>{if(!U.ok)throw new Error(`HTTP ${U.status}`);return U.blob()}).then(U=>{const g=URL.createObjectURL(U),d=document.createElement("a");d.href=g,d.download=`backup_${new Date().toISOString().slice(0,10)}${u}`,document.body.appendChild(d),d.click(),URL.revokeObjectURL(g),w(T)}).catch(U=>{console.error("Ошибка при скачивании резервной копии:",U),w(T),i.value.push({id:Date.now(),type:"error",text:`Ошибка при скачивании резервной копии: ${U.message}`})})}function w(r){const e=i.value.findIndex(u=>u.id===r);e!==-1&&i.value.splice(e,1)}return N(async()=>{h.isAdmin&&await P()}),(r,e)=>{const u=dt("RouterLink");return l(),s(x,null,[t("div",ml,[t("div",fl,[e[27]||(e[27]=t("h1",{class:"page-title"},"Панель управления",-1)),K(h).isAdmin?(l(),s("div",hl,[t("div",bl,[t("ul",yl,[t("li",{class:z(["admin-nav-item",{active:b.value==="dashboard"}]),onClick:e[0]||(e[0]=a=>b.value="dashboard")}," Обзор ",2),t("li",{class:z(["admin-nav-item",{active:b.value==="products"}]),onClick:e[1]||(e[1]=a=>b.value="products")}," Товары ",2),t("li",{class:z(["admin-nav-item",{active:b.value==="categories"}]),onClick:e[2]||(e[2]=a=>b.value="categories")}," Категории ",2),t("li",{class:z(["admin-nav-item",{active:b.value==="orders"}]),onClick:e[3]||(e[3]=a=>b.value="orders")}," Заказы ",2),t("li",{class:z(["admin-nav-item",{active:b.value==="users"}]),onClick:e[4]||(e[4]=a=>b.value="users")}," Пользователи ",2),t("li",{class:z(["admin-nav-item",{active:b.value==="logs"}]),onClick:e[5]||(e[5]=a=>b.value="logs")}," Логи ",2)])]),t("div",gl,[b.value==="dashboard"?(l(),s("div",$l,[e[25]||(e[25]=t("h2",{class:"admin-tab-title"},"Обзор",-1)),A.value?(l(),s("div",kl,e[11]||(e[11]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"Загрузка данных...",-1)]))):C.value?(l(),s("div",wl,[t("p",null,n(C.value),1),t("button",{onClick:P,class:"btn btn-outline"},"Повторить")])):(l(),s("div",Cl,[t("div",Sl,[t("div",El,[e[12]||(e[12]=t("h3",{class:"stat-title"},"Заказы",-1)),t("p",Al,n(y.value.totalOrders),1)]),t("div",Dl,[e[13]||(e[13]=t("h3",{class:"stat-title"},"Товары",-1)),t("p",Ul,n(y.value.totalProducts),1)]),t("div",Pl,[e[14]||(e[14]=t("h3",{class:"stat-title"},"Пользователи",-1)),t("p",Tl,n(y.value.totalUsers),1)]),t("div",xl,[e[15]||(e[15]=t("h3",{class:"stat-title"},"Доход",-1)),t("p",zl,n(y.value.totalRevenue.toLocaleString())+" ₽",1)])]),t("div",Vl,[e[17]||(e[17]=t("h3",{class:"section-title"},"Статистика заказов",-1)),t("div",Ll,[(l(!0),s(x,null,V(f.value,(a,T)=>(l(),s("div",{key:T,class:"chart-column"},[t("div",{class:"chart-bar",style:ct({height:`${Math.min(a.total_orders*20,200)}px`})},[t("div",Rl,[t("p",null,"Дата: "+n($(a.date)),1),t("p",null,"Заказов: "+n(a.total_orders),1),t("p",null,"Товаров: "+n(a.total_items),1),t("p",null,"Выручка: "+n(v(a.total_revenue)),1)])],4),t("div",Bl,n($(a.date)),1)]))),128))]),t("div",jl,[t("table",Ol,[e[16]||(e[16]=t("thead",null,[t("tr",null,[t("th",null,"Дата"),t("th",null,"Заказов"),t("th",null,"Товаров"),t("th",null,"Выручка")])],-1)),t("tbody",null,[(l(!0),s(x,null,V(f.value,(a,T)=>(l(),s("tr",{key:T},[t("td",null,n($(a.date)),1),t("td",null,n(a.total_orders),1),t("td",null,n(a.total_items),1),t("td",null,n(v(a.total_revenue)),1)]))),128))])])])]),t("div",Fl,[e[19]||(e[19]=t("h3",{class:"section-title"},"Топ продаж",-1)),t("div",Il,[t("table",Ml,[e[18]||(e[18]=t("thead",null,[t("tr",null,[t("th",null,"#"),t("th",null,"Товар"),t("th",null,"Продано"),t("th",null,"Выручка")])],-1)),t("tbody",null,[(l(!0),s(x,null,V(D.value,(a,T)=>(l(),s("tr",{key:a.id},[t("td",null,n(T+1),1),t("td",null,n(a.name),1),t("td",null,n(a.total_sold),1),t("td",null,n(v(a.total_revenue)),1)]))),128))])])])]),t("div",ql,[e[22]||(e[22]=t("h3",{class:"section-title"},"Резервное копирование",-1)),t("div",Gl,[t("button",{onClick:e[6]||(e[6]=a=>L("sql")),class:"btn btn-primary backup-btn"},e[20]||(e[20]=[t("span",{class:"backup-icon"},"📦",-1),M(" Скачать SQL-файл ")])),t("button",{onClick:e[7]||(e[7]=a=>L("csv")),class:"btn btn-primary backup-btn"},e[21]||(e[21]=[t("span",{class:"backup-icon"},"📋",-1),M(" Скачать CSV-файл ")]))]),e[23]||(e[23]=t("p",{class:"backup-info"},[M(" Резервное копирование позволяет сохранить все данные магазина для последующего восстановления. "),t("br"),M("SQL-файл содержит полную структуру базы данных, CSV-файл предназначен для анализа данных. ")],-1)),e[24]||(e[24]=t("div",{class:"backup-warning"},[t("span",{class:"warning-icon"},"⚠️"),t("p",null,"В зависимости от объёма базы данных загрузка может быть долгой. Пожалуйста, не уходите со страницы во время создания и скачивания резервной копии.")],-1))])]))])):b.value==="products"?(l(),s("div",Nl,[F(le)])):b.value==="categories"?(l(),s("div",Jl,[F(we)])):b.value==="orders"?(l(),s("div",Ql,[F(ps)])):b.value==="users"?(l(),s("div",Hl,[F(Xs)])):b.value==="logs"?(l(),s("div",Kl,[F(pl)])):(l(),s("div",Wl,[t("h2",Xl,n(b.value),1),e[26]||(e[26]=t("p",{class:"placeholder-message"},"Эта функциональность будет добавлена позже",-1))]))])])):(l(),s("div",_l,[e[9]||(e[9]=t("h2",null,"Доступ запрещен",-1)),e[10]||(e[10]=t("p",null,"У вас нет прав для доступа к этой странице.",-1)),F(u,{to:"/",class:"btn btn-primary"},{default:ut(()=>e[8]||(e[8]=[M("Вернуться на главную")])),_:1})]))])]),(l(!0),s(x,null,V(i.value,a=>(l(),s("div",{key:a.id,class:z(["admin-notification",a.type])},n(a.text),3))),128))],64)}}},tn=q(Yl,[["__scopeId","data-v-84e8a1a8"]]);export{tn as default};

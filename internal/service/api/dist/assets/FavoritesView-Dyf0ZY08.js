import{_ as m,u as y,m as g,k,r as d,p as F,A as w,g as x,c as s,a,s as B,x as C,y as P,F as S,e as A,o,B as V,z as L,P as T}from"./index-Bb9AnJlj.js";const N={class:"favorites-page"},R={class:"container"},b={key:0,class:"loading-container"},I={key:1},z={key:0,class:"empty-favorites"},E={key:1,class:"favorites-grid"},M={__name:"FavoritesView",setup(j){const l=y(),n=g(),c=k(),v=w(),i=d(!0),r=d([]);F(async()=>{if(!l.isAuthenticated){v.push("/login");return}try{i.value=!0;const e=await n.fetchFavorites();e.success?await f():console.error("Ошибка при загрузке избранных товаров:",e.error)}catch(e){console.error("Ошибка при загрузке избранных товаров:",e)}finally{i.value=!1}});async function f(){if(r.value=[],n.favorites.length!==0)for(const e of n.favorites){const t=await c.fetchProductById(e.product_id);t&&r.value.push(t)}}function p(e){c.addToCart(e)}const _=x(()=>r.value.length>0);return(e,t)=>{const h=P("RouterLink");return o(),s("div",N,[a("div",R,[t[3]||(t[3]=a("h1",{class:"page-title"},"Избранные товары",-1)),i.value?(o(),s("div",b,t[0]||(t[0]=[a("div",{class:"loading-spinner"},null,-1),a("p",null,"Загрузка избранных товаров...",-1)]))):(o(),s("div",I,[_.value?(o(),s("div",E,[(o(!0),s(S,null,A(r.value,u=>(o(),L(T,{key:u.id,product:u,onAddToCart:p},null,8,["product"]))),128))])):(o(),s("div",z,[t[2]||(t[2]=a("p",null,"У вас нет избранных товаров",-1)),B(h,{to:"/catalog",class:"btn btn-primary"},{default:C(()=>t[1]||(t[1]=[V("Перейти в каталог")])),_:1})]))]))])])}}},D=m(M,[["__scopeId","data-v-8055d4d8"]]);export{D as default};
